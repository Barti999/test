// Funkcja pobierająca listę posłów
async function fetchMpList() {
    const url = 'https://api.sejm.gov.pl/sejm/term10/MP';
    try {
        const response = await fetch(url);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error("Błąd podczas pobierania listy posłów:", error);
    }
}

// Funkcja wyświetlająca listę posłów
async function displayMpList() {
    const mpList = await fetchMpList();
    const mpListContainer = document.getElementById('mpListItems');

    if (mpList && mpList.length > 0) {
        let html = '';
        mpList.forEach(mp => {
            html += `
                <li>
                    <strong>${mp.firstLastName}</strong> (ID: ${mp.id})<br>
                    Partia: ${mp.club}<br>
                    <button onclick="displayVotes(${mp.id})">Pokaż głosowania</button>
                </li>
            `;
        });
        mpListContainer.innerHTML = html;
    } else {
        mpListContainer.innerHTML = '<li>Brak danych o posłach.</li>';
    }
}

// Wywołaj funkcję wyświetlającą listę posłów po załadowaniu strony
window.onload = displayMpList;